---
import ComponentLayout from '../../layouts/ComponentLayout.astro';
import DemoRow from '../../components/DemoRow.astro';
import DemoBox from '../../components/DemoBox.astro';
import CodeBlock from '../../components/CodeBlock.astro';

const props = [
  { name: 'variant', type: "'primary' | 'secondary' | 'outline' | 'ghost' | 'error' | 'success' | 'warning' | 'info'", default: "'primary'", description: 'Variante de color del bot√≥n' },
  { name: 'size', type: "'xs' | 'sm' | 'md' | 'lg'", default: "'md'", description: 'Tama√±o del bot√≥n' },
  { name: 'shape', type: "'default' | 'pill' | 'circle' | 'square' | 'block'", default: "'default'", description: 'Forma del bot√≥n' },
  { name: 'disabled', type: 'boolean', default: 'false', description: 'Deshabilita el bot√≥n' },
  { name: 'loading', type: 'boolean', default: 'false', description: 'Muestra spinner de carga' },
  { name: 'loading-text', type: 'string', default: 'undefined', description: 'Texto durante la carga' },
  { name: 'leading-icon', type: 'string', default: 'undefined', description: 'Nombre del icono al inicio' },
  { name: 'trailing-icon', type: 'string', default: 'undefined', description: 'Nombre del icono al final' },
  { name: 'type', type: "'button' | 'submit' | 'reset'", default: "'button'", description: 'Tipo de bot√≥n HTML' },
  { name: 'aria-label', type: 'string', default: 'undefined', description: 'Etiqueta accesible para screen readers' },
];

const events = [
  { name: 'sgClick', type: 'CustomEvent<MouseEvent>', description: 'Emitido al hacer click (si no est√° deshabilitado/cargando)' },
];

const slots = [
  { name: '(default)', description: 'Contenido del bot√≥n (texto, iconos, etc.)' },
];
---

<ComponentLayout
  title="Button"
  tag="sg-button"
  packageName="button"
  description="Componente de bot√≥n interactivo con m√∫ltiples variantes, tama√±os y estados. Soporta iconos, estados de carga y es totalmente accesible."
  props={props}
  events={events}
  slots={slots}
>
  <Fragment slot="examples">
    <DemoBox label="Variantes" code={`<sg-button variant="primary">Primary</sg-button>
<sg-button variant="secondary">Secondary</sg-button>
<sg-button variant="outline">Outline</sg-button>
<sg-button variant="ghost">Ghost</sg-button>
<sg-button variant="error">Error</sg-button>
<sg-button variant="success">Success</sg-button>
<sg-button variant="warning">Warning</sg-button>
<sg-button variant="info">Info</sg-button>`}>
      <div style="display: flex; flex-wrap: wrap; gap: 0.75rem; justify-content: center;">
        <sg-button variant="primary">Primary</sg-button>
        <sg-button variant="secondary">Secondary</sg-button>
        <sg-button variant="outline">Outline</sg-button>
        <sg-button variant="ghost">Ghost</sg-button>
        <sg-button variant="error">Error</sg-button>
        <sg-button variant="success">Success</sg-button>
        <sg-button variant="warning">Warning</sg-button>
        <sg-button variant="info">Info</sg-button>
      </div>
    </DemoBox>

    <DemoBox label="Tama√±os" code={`<sg-button size="xs">Extra Small</sg-button>
<sg-button size="sm">Small</sg-button>
<sg-button size="md">Medium</sg-button>
<sg-button size="lg">Large</sg-button>`}>
      <div style="display: flex; flex-wrap: wrap; gap: 0.75rem; align-items: center; justify-content: center;">
        <sg-button size="xs">Extra Small</sg-button>
        <sg-button size="sm">Small</sg-button>
        <sg-button size="md">Medium</sg-button>
        <sg-button size="lg">Large</sg-button>
      </div>
    </DemoBox>

    <DemoBox label="Formas" code={`<sg-button shape="default">Default</sg-button>
<sg-button shape="pill">Pill</sg-button>
<sg-button shape="square">‚ñ†</sg-button>
<sg-button shape="circle">‚óè</sg-button>`}>
      <div style="display: flex; flex-wrap: wrap; gap: 0.75rem; align-items: center; justify-content: center;">
        <sg-button shape="default">Default</sg-button>
        <sg-button shape="pill">Pill</sg-button>
        <sg-button shape="square">‚ñ†</sg-button>
        <sg-button shape="circle">‚óè</sg-button>
      </div>
    </DemoBox>

    <DemoBox label="Ancho completo" code={`<sg-button shape="block">Block Button</sg-button>
<sg-button shape="block" variant="outline">Block Outline</sg-button>`}>
      <div style="display: flex; flex-direction: column; gap: 0.75rem; width: 100%;">
        <sg-button shape="block">Block Button</sg-button>
        <sg-button shape="block" variant="outline">Block Outline</sg-button>
      </div>
    </DemoBox>

    <DemoBox label="Con iconos" code={`<sg-button leading-icon="add">A√±adir</sg-button>
<sg-button trailing-icon="arrow-right">Siguiente</sg-button>
<sg-button leading-icon="save" trailing-icon="check">Guardar</sg-button>
<sg-button shape="circle" leading-icon="heart" aria-label="Favorito"></sg-button>
<sg-button shape="circle" variant="outline" leading-icon="settings" aria-label="Configuraci√≥n"></sg-button>`}>
      <div style="display: flex; flex-wrap: wrap; gap: 0.75rem; align-items: center; justify-content: center;">
        <sg-button leading-icon="add">A√±adir</sg-button>
        <sg-button trailing-icon="arrow-right">Siguiente</sg-button>
        <sg-button leading-icon="save" trailing-icon="check">Guardar</sg-button>
        <sg-button shape="circle" leading-icon="heart" aria-label="Favorito"></sg-button>
        <sg-button shape="circle" variant="outline" leading-icon="settings" aria-label="Configuraci√≥n"></sg-button>
      </div>
    </DemoBox>

    <DemoBox label="Estados" code={`<sg-button disabled>Deshabilitado</sg-button>
<sg-button variant="secondary" disabled>Secondary Disabled</sg-button>
<sg-button loading>Cargando...</sg-button>
<sg-button loading loading-text="Guardando...">Guardar</sg-button>`}>
      <div style="display: flex; flex-wrap: wrap; gap: 0.75rem; align-items: center; justify-content: center;">
        <sg-button disabled>Deshabilitado</sg-button>
        <sg-button variant="secondary" disabled>Secondary Disabled</sg-button>
        <sg-button loading>Cargando...</sg-button>
        <sg-button loading loading-text="Guardando...">Guardar</sg-button>
      </div>
    </DemoBox>

    <DemoBox label="Combinaciones" code={`<sg-button variant="success" leading-icon="check" shape="pill">Completado</sg-button>
<sg-button variant="error" leading-icon="trash" size="sm">Eliminar</sg-button>
<sg-button variant="warning" trailing-icon="alert" size="lg">Advertencia</sg-button>
<sg-button variant="info" leading-icon="info" shape="pill" size="sm">Info</sg-button>`}>
      <div style="display: flex; flex-wrap: wrap; gap: 0.75rem; align-items: center; justify-content: center;">
        <sg-button variant="success" leading-icon="check" shape="pill">Completado</sg-button>
        <sg-button variant="error" leading-icon="trash" size="sm">Eliminar</sg-button>
        <sg-button variant="warning" trailing-icon="alert" size="lg">Advertencia</sg-button>
        <sg-button variant="info" leading-icon="info" shape="pill" size="sm">Info</sg-button>
      </div>
    </DemoBox>
  </Fragment>

  <Fragment slot="usage">
    <div class="usage-block">
      <h3>Instalaci√≥n</h3>
      <p>El componente est√° disponible como parte de la librer√≠a SageBox.</p>
      <CodeBlock code="npm install sagebox" filename="terminal" />
    </div>

    <div class="usage-block">
      <h3>Uso b√°sico</h3>
      <CodeBlock
        filename="example.html"
        code={`<sg-button>Click me</sg-button>

<!-- Con variante -->
<sg-button variant="secondary">Secondary</sg-button>

<!-- Con icono -->
<sg-button leading-icon="save">Guardar</sg-button>`}
      />
    </div>

    <div class="usage-block">
      <h3>Manejo de eventos</h3>
      <CodeBlock
        filename="events.js"
        code={`// JavaScript
const button = document.querySelector('sg-button');
button.addEventListener('sgClick', (event) => {
  console.log('Button clicked!', event.detail);
});

// Angular
<sg-button (sgClick)="onButtonClick($event)">Click</sg-button>

// React
<SgButton onSgClick={(e) => handleClick(e)}>Click</SgButton>`}
      />
    </div>

    <div class="usage-block">
      <h3>Accesibilidad</h3>
      <p>El componente incluye soporte completo para accesibilidad siguiendo las pautas WCAG 2.1:</p>

      <div class="a11y-section">
        <h4>üè∑Ô∏è Etiquetas ARIA</h4>
        <ul>
          <li>Usa <code>aria-label</code> para proporcionar texto descriptivo cuando el bot√≥n solo tiene un icono</li>
          <li>El estado <code>disabled</code> a√±ade autom√°ticamente <code>aria-disabled="true"</code></li>
          <li>El estado <code>loading</code> a√±ade <code>aria-busy="true"</code> para indicar una operaci√≥n en progreso</li>
        </ul>
        <CodeBlock
          filename="a11y.html"
          code={`<!-- Bot√≥n con solo icono - requiere aria-label -->
<sg-button shape="circle" leading-icon="heart" aria-label="A√±adir a favoritos"></sg-button>

<!-- El componente a√±ade aria-describedby si hay texto de ayuda -->
<sg-button aria-describedby="help-text">Enviar</sg-button>`}
        />
      </div>

      <div class="a11y-section">
        <h4>‚å®Ô∏è Navegaci√≥n por Teclado</h4>
        <ul>
          <li><kbd>Tab</kbd> - Navega al bot√≥n (respeta el orden del DOM)</li>
          <li><kbd>Enter</kbd> / <kbd>Space</kbd> - Activa el bot√≥n</li>
          <li>El bot√≥n no es enfocable cuando est√° <code>disabled</code></li>
        </ul>
      </div>

      <div class="a11y-section">
        <h4>üé® Contraste de Color</h4>
        <p>Todas las variantes cumplen con el ratio de contraste m√≠nimo de 4.5:1 para texto normal seg√∫n WCAG AA.</p>
      </div>
    </div>
  </Fragment>
</ComponentLayout>

<style>
  .usage-block {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--radius-lg);
    padding: 1.5rem;
    box-shadow: var(--shadow-sm);
  }

  .usage-block h3 {
    font-size: 1rem;
    font-weight: 600;
    margin: 0 0 1rem 0;
    color: var(--text);
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .usage-block h4 {
    font-size: 0.875rem;
    font-weight: 600;
    margin: 0 0 0.625rem 0;
    color: var(--text);
  }

  .usage-block p {
    font-size: 0.875rem;
    color: var(--text-muted);
    margin: 0 0 1rem 0;
    line-height: 1.6;
  }

  .usage-block > code,
  .usage-block ul code,
  .usage-block p code {
    font-family: var(--font-mono);
    font-size: 0.8125rem;
    background: var(--accent-soft);
    color: var(--accent);
    padding: 0.1875rem 0.5rem;
    border-radius: 4px;
  }

  .usage-block ul {
    margin: 0 0 0.75rem 0;
    padding-left: 1.25rem;
    font-size: 0.875rem;
    color: var(--text-muted);
    line-height: 1.9;
  }

  .usage-block li {
    margin-bottom: 0.25rem;
  }

  .a11y-section {
    margin-top: 1.25rem;
    padding-top: 1.25rem;
    border-top: 1px solid var(--border-subtle);
  }

  .a11y-section:first-of-type {
    margin-top: 1rem;
    padding-top: 0;
    border-top: none;
  }

  .a11y-section p {
    margin-bottom: 0;
  }

  kbd {
    display: inline-block;
    padding: 0.125rem 0.5rem;
    font-family: var(--font-mono);
    font-size: 0.8125rem;
    background: var(--surface-hover);
    border: 1px solid var(--border);
    border-radius: 4px;
    box-shadow: 0 1px 0 var(--border);
    color: var(--text);
  }
</style>
