---
interface Prop {
  name: string;
  attribute?: string;
  type: string;
  default: string;
  description: string;
}

interface Event {
  name: string;
  description: string;
  type: string;
}

interface Slot {
  name: string;
  description: string;
}

interface Method {
  name: string;
  description: string;
  returns: string;
}

interface Props {
  props?: Prop[];
  events?: Event[];
  slots?: Slot[];
  methods?: Method[];
  compact?: boolean;
}

const { props = [], events = [], slots = [], methods = [], compact = false } = Astro.props;
---

<div class={`docs-tables ${compact ? 'compact' : ''}`}>
  {props.length > 0 && (
    <div class="docs-section">
      <div class="section-header">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M12 3v18M3 12h18"/>
        </svg>
        <h4>Propiedades</h4>
        <span class="count">{props.length}</span>
      </div>
      <div class="table-wrapper">
        <table>
          <thead>
            <tr>
              <th>Prop</th>
              <th>Tipo</th>
              <th>Default</th>
              <th>Descripción</th>
            </tr>
          </thead>
          <tbody>
            {props.map((prop) => (
              <tr>
                <td><code class="prop-name">{prop.name}</code></td>
                <td><code class="prop-type">{prop.type}</code></td>
                <td><code class="prop-default">{prop.default}</code></td>
                <td class="prop-desc">{prop.description}</td>
              </tr>
            ))}
          </tbody>
        </table>
      </div>
    </div>
  )}

  {events.length > 0 && (
    <div class="docs-section">
      <div class="section-header">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/>
        </svg>
        <h4>Eventos</h4>
        <span class="count">{events.length}</span>
      </div>
      <div class="table-wrapper">
        <table>
          <thead>
            <tr>
              <th>Evento</th>
              <th>Tipo</th>
              <th>Descripción</th>
            </tr>
          </thead>
          <tbody>
            {events.map((event) => (
              <tr>
                <td><code class="event-name">{event.name}</code></td>
                <td><code class="event-type">{event.type}</code></td>
                <td class="event-desc">{event.description}</td>
              </tr>
            ))}
          </tbody>
        </table>
      </div>
    </div>
  )}

  {slots.length > 0 && (
    <div class="docs-section">
      <div class="section-header">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="3" y="3" width="18" height="18" rx="2"/>
          <path d="M9 3v18M15 3v18"/>
        </svg>
        <h4>Slots</h4>
        <span class="count">{slots.length}</span>
      </div>
      <div class="table-wrapper">
        <table>
          <thead>
            <tr>
              <th>Slot</th>
              <th>Descripción</th>
            </tr>
          </thead>
          <tbody>
            {slots.map((slot) => (
              <tr>
                <td><code class="slot-name">{slot.name || '(default)'}</code></td>
                <td class="slot-desc">{slot.description}</td>
              </tr>
            ))}
          </tbody>
        </table>
      </div>
    </div>
  )}

  {methods.length > 0 && (
    <div class="docs-section">
      <div class="section-header">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="m16 18 6-6-6-6"/><path d="m8 6-6 6 6 6"/>
        </svg>
        <h4>Métodos</h4>
        <span class="count">{methods.length}</span>
      </div>
      <div class="table-wrapper">
        <table>
          <thead>
            <tr>
              <th>Método</th>
              <th>Retorna</th>
              <th>Descripción</th>
            </tr>
          </thead>
          <tbody>
            {methods.map((method) => (
              <tr>
                <td><code class="method-name">{method.name}()</code></td>
                <td><code class="method-returns">{method.returns}</code></td>
                <td class="method-desc">{method.description}</td>
              </tr>
            ))}
          </tbody>
        </table>
      </div>
    </div>
  )}
</div>

<style>
  .docs-tables {
    display: flex;
    flex-direction: column;
    gap: 2.5rem;
    width: 100%;
  }

  .docs-tables.compact {
    gap: 1.5rem;
  }

  .docs-section {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--radius-lg);
    overflow: hidden;
    box-shadow: var(--shadow-sm);
  }

  .section-header {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 1rem 1.25rem;
    background: var(--surface-hover);
    border-bottom: 1px solid var(--border);
    color: var(--text);
  }

  .section-header svg {
    color: var(--accent);
    flex-shrink: 0;
  }

  .section-header h4 {
    margin: 0;
    font-size: 0.875rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.04em;
  }

  .section-header .count {
    margin-left: auto;
    font-size: 0.75rem;
    font-weight: 600;
    background: var(--accent-soft);
    color: var(--accent);
    padding: 0.25rem 0.625rem;
    border-radius: var(--radius-sm);
    min-width: 28px;
    text-align: center;
  }

  .table-wrapper {
    overflow-x: auto;
  }

  table {
    width: 100%;
    border-collapse: collapse;
    font-size: 0.875rem;
  }

  .compact table {
    font-size: 0.8125rem;
  }

  th {
    text-align: left;
    padding: 1rem 1.25rem;
    font-weight: 600;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    font-size: 0.6875rem;
    background: var(--bg);
    border-bottom: 2px solid var(--border);
  }

  /* Center align for Type and Default columns */
  th:nth-child(2),
  th:nth-child(3) {
    text-align: center;
  }

  td {
    padding: 1rem 1.25rem;
    border-bottom: 1px solid var(--border-subtle);
    vertical-align: middle;
    line-height: 1.6;
  }

  /* Center align for Type and Default cells */
  td:nth-child(2),
  td:nth-child(3) {
    text-align: center;
  }

  tr:last-child td {
    border-bottom: none;
  }

  tr:hover td {
    background: var(--surface-hover);
  }

  code {
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
    font-size: 0.8125rem;
    padding: 0.25rem 0.625rem;
    border-radius: 5px;
    white-space: nowrap;
  }

  .prop-name, .event-name, .slot-name, .method-name {
    background: var(--accent-soft);
    color: var(--accent);
    font-weight: 600;
  }

  .prop-type, .event-type, .method-returns {
    background: var(--code-bg);
    color: var(--code-text);
    word-break: break-word;
    white-space: pre-wrap;
    max-width: 240px;
    font-size: 0.75rem;
    display: inline-block;
  }

  .prop-default {
    background: rgba(16, 185, 129, 0.15);
    color: var(--success);
    font-weight: 500;
  }

  .prop-desc, .event-desc, .slot-desc, .method-desc {
    color: var(--text);
    line-height: 1.7;
    font-size: 0.875rem;
    text-align: left;
  }

  @media (max-width: 768px) {
    th, td {
      padding: 0.75rem;
    }

    .prop-type, .event-type {
      max-width: 140px;
    }

    th:nth-child(2),
    th:nth-child(3),
    td:nth-child(2),
    td:nth-child(3) {
      text-align: left;
    }
  }
</style>
